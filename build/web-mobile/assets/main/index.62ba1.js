window.__require=function t(e,o,n){function c(i,s){if(!o[i]){if(!e[i]){var a=i.split("/");if(a=a[a.length-1],!e[a]){var p="function"==typeof __require&&__require;if(!s&&p)return p(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+i+"'")}i=a}var u=o[i]={exports:{}};e[i][0].call(u.exports,function(t){return c(e[i][1][t]||t)},u,u.exports,t,e,o,n)}return o[i].exports}for(var r="function"==typeof __require&&__require,i=0;i<n.length;i++)c(n[i]);return c}({Auto:[function(t,e,o){"use strict";cc._RF.push(e,"43806Ww5ltM0ZicolPYi2mh","Auto");var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),c=0;for(e=0;e<o;e++)for(var r=arguments[e],i=0,s=r.length;i<s;i++,c++)n[c]=r[i];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.generateRandomMap=o.auto=void 0;var c=t("./Map"),r=new Map;function i(t){return t.map(function(t){return t.map(function(t){return r.get(t)}).join("")}).join("")}function s(t){for(var e=0,o=[[0,1],[0,-1],[1,0],[-1,0]],n=new Set,c=0;c<5;c++)for(var r=0;r<4&&2!==e;r++)if(0===t[c][r]){for(var i=0,s=o;i<s.length;i++){var a=s[i],p=c+a[0],u=r+a[1];p>=0&&p<5&&u>=0&&u<4&&0!==t[p][u]&&n.add(t[p][u])}e+=1}return Array.from(n)}function a(t,e){for(var o=t.hrdMap,r=t.operate,i=[!1,!1,!1,!1],s=c.chessCount[e],a=[s,s,s,s],p=[[],[],[],[]],u=0;u<o.length;u++)for(var h=0;h<o[u].length;h++)o[u][h]===e&&(o[u-1]&&0===o[u-1][h]?p[0].push([u,h]):a[0]--,0!==o[u][h+1]?a[1]--:p[1].push([u,h]),o[u+1]&&0===o[u+1][h]?p[2].push([u,h]):a[2]--,0!==o[u][h-1]?a[3]--:p[3].push([u,h]));2===e?(i[0]=2===a[0],i[1]=2===a[1],i[2]=2===a[2],i[3]=2===a[3]):1===e||3===e||4==e||6===e?(i[0]=1===a[0],i[1]=2===a[1],i[2]=1===a[2],i[3]=2===a[3]):5===e?(i[0]=2===a[0],i[1]=1===a[1],i[2]=2===a[2],i[3]=1===a[3]):(i[0]=a[0]===c.chessCount[e],i[1]=a[1]===c.chessCount[e],i[2]=a[2]===c.chessCount[e],i[3]=a[3]===c.chessCount[e]);var f=[];return i.forEach(function(t,c){if(t){var i=o.map(function(t){return n(t)}),s=n(r);if(0===c){s.push(e+"_up");for(var a=0;a<p[0].length;a++){var u=p[0][a],h=u[0],l=u[1];2===e||[1,3,4,6].includes(e)?(i[h-1][l]=e,i[h+1][l]=0):(i[h][l]=0,i[h-1][l]=e)}}if(1===c)for(s.push(e+"_right"),a=0;a<p[1].length;a++){var d=p[1][a];h=d[0],l=d[1],2===e||5===e?(i[h][l-1]=0,i[h][l+1]=e):(i[h][l]=0,i[h][l+1]=e)}if(2===c)for(s.push(e+"_down"),a=0;a<p[2].length;a++){var v=p[2][a];h=v[0],l=v[1],2===e||[1,3,4,6].includes(e)?(i[h-1][l]=0,i[h+1][l]=e):(i[h][l]=0,i[h+1][l]=e)}if(3===c)for(s.push(e+"_left"),a=0;a<p[3].length;a++){var y=p[3][a];h=y[0],l=y[1],2===e||5===e?(i[h][l-1]=e,i[h][l+1]=0):(i[h][l]=0,i[h][l-1]=e)}f.push({hrdMap:i,operate:s})}}),f}r.set(0,"0"),r.set(1,"a"),r.set(2,"2"),r.set(3,"a"),r.set(4,"a"),r.set(5,"5"),r.set(6,"a"),r.set(7,"b"),r.set(8,"b"),r.set(9,"b"),r.set(10,"b"),o.auto=function(t){var e=t.hrdMap,o=t.operate;console.time();for(var n=new Set,c=[{hrdMap:e,operate:o}],r=function(){var t=c.shift(),e=s(t.hrdMap),o=[];e.forEach(function(e){var n=a(t,e);n.length>0&&(o=o.concat(n))});for(var r=0;r<o.length;r++){var p=o[r],u=p.hrdMap,h=p.operate;if(u&&2===u[4][1]&&2===u[4][2])return console.timeEnd(),{value:{hrdMap:u,operate:h}};var f=i(u);n.has(f)||(n.add(f),c.push(p))}};c.length>0;){var p=r();if("object"==typeof p)return p.value}},o.generateRandomMap=function(){for(var t=[{hrdMap:[[1,4,6,3],[1,4,6,3],[5,5,8,10],[7,2,2,0],[9,2,2,0]],operate:[]}],e=[],o=new Set,n=Math.floor(30+50*Math.random()),c=Date.now(),r=function(){var r=t.shift(),p=s(r.hrdMap),u=[];if(p.forEach(function(t){var e=a(r,t);e.length>0&&(u=u.concat(e))}),e.length>100||Date.now()-c>1500)return{value:e[Math.floor(Math.random()*e.length)]};for(var h=0;h<u.length;h++){var f=u[h],l=f.hrdMap,d=f.operate,v=i(l);o.has(v)||(o.add(v),t.push(f),d.length>n&&e.push(f))}};t.length>0;){var p=r();if("object"==typeof p)return p.value}},cc._RF.pop()},{"./Map":"Map"}],Button:[function(t,e,o){"use strict";cc._RF.push(e,"2c46eXjk3RBm4TUgtoWzhCl","Button");var n,c=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var c,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(c=t[s])&&(i=(r<3?c(i):r>3?c(e,o,i):c(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator.ccclass,s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.onLoad=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){cc.tween(t.node).to(.1,{scale:.8}).to(.1,{scale:1}).start()},this.node)},r([i],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],Chess:[function(t,e,o){"use strict";cc._RF.push(e,"27792rcg6VPHZfggPPoEY48","Chess");var n,c=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var c,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(c=t[s])&&(i=(r<3?c(i):r>3?c(e,o,i):c(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Dialog"),s=t("./Map"),a=cc._decorator,p=a.ccclass,u=a.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startPosition=cc.Vec2.ZERO,e.selectedNode=null,e.chessId=0,e}return c(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoved,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.prototype.onTouchBegan=function(t){return this.startPosition=t.getLocation(),this.selectedNode=t.getCurrentTarget(),!0},e.prototype.onTouchMoved=function(){this.selectedNode},e.prototype.onTouchEnd=function(t){var e=t.getLocation(),o=e.x-this.startPosition.x,n=e.y-this.startPosition.y;Math.abs(o)>Math.abs(n)?o>0?this.moveRight():this.moveLeft():n>0?this.moveUp():this.moveDown(),this.startPosition=e},e.prototype.moveRight=function(){i.default.isShow||s.canMoveRight(this.chessId)&&(this.node.x+=160,s.checkSuccess())},e.prototype.moveLeft=function(){i.default.isShow||s.canMoveLeft(this.chessId)&&(this.node.x-=160,s.checkSuccess())},e.prototype.moveUp=function(){i.default.isShow||s.canMoveUp(this.chessId)&&(this.node.y+=160,s.checkSuccess())},e.prototype.moveDown=function(){i.default.isShow||s.canMoveDown(this.chessId)&&(this.node.y-=160,s.checkSuccess())},r([u(cc.Integer)],e.prototype,"chessId",void 0),r([p],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./Dialog":"Dialog","./Map":"Map"}],Dialog:[function(t,e,o){"use strict";cc._RF.push(e,"ba169SOe3lIIoIIqBJF2LkX","Dialog");var n,c=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var c,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(c=t[s])&&(i=(r<3?c(i):r>3?c(e,o,i):c(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,a=i.property,p=new Map;p.set(1,{name:"\u66f9\u64cd",url:"avator/avator_caocao"}),p.set(2,{name:"\u5173\u7fbd",url:"avator/avator_guanyu"});var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.textEnd=!0,e.textTime=0,e}var o;return c(e,t),o=e,e.prototype.onLoad=function(){this.init([{role:1,content:"\u4e91\u957f\u5144\uff0c\u4e3a\u4f55\u62e6\u6211\u53bb\u8def\uff01"},{role:2,content:"\u5b5f\u5fb7\u5144\uff0c\u6614\u65e5\u60c5\u8c0a\uff0c\u65a9\u989c\u826f\uff0c\u6740\u6587\u4e11\u5df2\u62a5\uff0c\u8fd9\u6b21\u6211\u4e0d\u4f1a\u624b\u4e0b\u7559\u60c5\u3002"},{role:1,content:"\u5c4f\u5e55\u524d\u7684\u82f1\u96c4\uff0c\u8bf7\u52a8\u52a8\u5c0f\u624b\uff0c\u52a9\u6211\u8131\u56f0\u5427\uff01"}]),this.container.on(cc.Node.EventType.TOUCH_END,this.onClick,this),this.mask.on(cc.Node.EventType.TOUCH_END,function(t){t.preventDefault()},this)},e.prototype.onClick=function(){this.nextTextData()},e.prototype.init=function(t){if(localStorage.getItem("@xf/hrdDialog"))return this.node.active=!1,void(o.isShow=!1);this.nowText=null,this.textEnd=!0,this.textIndex=-1,this.textDataArr=t,this.node.active=!0,o.isShow=!0,this.nextTextData()},e.prototype.nextTextData=function(){this.textEnd&&(++this.textIndex<this.textDataArr.length?(this.setTextData(this.textDataArr[this.textIndex]),this.textEnd=!1):this.closeDialog())},e.prototype.setTextData=function(t){var e=this;this.nameLabel.string=p.get(t.role).name,this.textLabel.string="",this.nowText=t.content,cc.loader.loadRes(p.get(t.role).url,cc.SpriteFrame,function(t,o){e.picSprite.spriteFrame=o})},e.prototype.closeDialog=function(){this.node.active=!1,o.isShow=!1,localStorage.setItem("@xf/hrdDialog",""+Date.now())},e.prototype.update=function(t){this.nowText&&(this.textTime+=t,this.textTime>=.1&&(this.textLabel.string.length<this.nowText.length?this.textLabel.string=this.nowText.slice(0,this.textLabel.string.length+1):(this.textEnd=!0,this.nowText=""),this.textTime=0))},e.isShow=!1,r([a(cc.Sprite)],e.prototype,"picSprite",void 0),r([a(cc.Label)],e.prototype,"nameLabel",void 0),r([a(cc.Label)],e.prototype,"textLabel",void 0),r([a(cc.Node)],e.prototype,"container",void 0),r([a(cc.Node)],e.prototype,"mask",void 0),o=r([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],HistoryPopup:[function(t,e,o){"use strict";cc._RF.push(e,"a579f+LrARLvYDnTh5rbZWj","HistoryPopup");var n,c=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var c,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(c=t[s])&&(i=(r<3?c(i):r>3?c(e,o,i):c(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.bindHistoryConfirmEvent=void 0;var i=cc._decorator.ccclass,s=function(){};o.bindHistoryConfirmEvent=function(t){s=t};var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.onLoad=function(){var t=this;cc.find("confirm/confirm-btn",this.node).on(cc.Node.EventType.TOUCH_END,function(){s(),t.node.active=!1}),cc.find("confirm/cancel-btn",this.node).on(cc.Node.EventType.TOUCH_END,function(){localStorage.removeItem("@xf/historyGame"),t.node.active=!1})},r([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],LevelPopup:[function(t,e,o){"use strict";cc._RF.push(e,"8559eZxDVhCJ7Cq7RESqYRL","LevelPopup");var n,c=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var c,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(c=t[s])&&(i=(r<3?c(i):r>3?c(e,o,i):c(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.bindRandomLevelEvent=o.bindChooseLevelEvent=void 0;var i=t("./Map"),s=cc._decorator,a=s.ccclass,p=s.property,u=function(){},h=function(){};o.bindChooseLevelEvent=function(t){u=t},o.bindRandomLevelEvent=function(t){h=t};var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.onLoad=function(){for(var t=this,e=function(e){var n=cc.instantiate(o.prefab);n.y=400-150*e,e===i.maps.length?(cc.find("text",n).getComponent(cc.Label).string="\u968f\u673a\u5173\u5361",n.on(cc.Node.EventType.TOUCH_END,function(){h(),t.node.active=!1})):(cc.find("text",n).getComponent(cc.Label).string=i.maps[e].name,n.on(cc.Node.EventType.TOUCH_END,function(){u(e),t.node.active=!1})),o.node.addChild(n)},o=this,n=0;n<i.maps.length+1;n++)e(n);cc.find("mask",this.node).on(cc.Node.EventType.TOUCH_END,function(){t.node.active=!1})},e.prototype.onEnable=function(){var t=[];try{t=JSON.parse(localStorage.getItem("@xf/levels")||"[]")}catch(o){}for(var e=0;e<i.maps.length;e++)t.includes(e)&&(cc.find("successText",this.node.children[e+2]).active=!0)},r([p(cc.Prefab)],e.prototype,"prefab",void 0),r([a],e)}(cc.Component);o.default=f,cc._RF.pop()},{"./Map":"Map"}],Main:[function(t,e,o){"use strict";cc._RF.push(e,"d2abamq2jREerJNbCgZiQwr","Main");var n,c=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var c,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(c=t[s])&&(i=(r<3?c(i):r>3?c(e,o,i):c(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Auto"),s=t("./HistoryPopup"),a=t("./LevelPopup"),p=t("./Map"),u=t("./Rank"),h=cc._decorator,f=h.ccclass,l=h.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mapIndex=0,e.title=null,e.star=null,e.successPopup=null,e.historyPopup=null,e.guanqiaPopup=null,e.btnReset=null,e.btnTip=null,e.btnLevel=null,e.btnRank=null,e.isCompute=!1,e.historyInfo={mapIndex:0,hrdMap:[],position:{}},e.chessMap={},e.randomGame=function(){var t=i.generateRandomMap();p.startRandomGame(t.hrdMap),e.setUIInfo("\u968f\u673a\u5730\u56fe",Math.floor(t.operate.length/20),t.hrdMap)},e}return c(e,t),e.prototype.onLoad=function(){var t=this;this.chessMap={1:cc.find("chess/zhangfei",this.node),2:cc.find("chess/caocao",this.node),3:cc.find("chess/machao",this.node),4:cc.find("chess/huangzhong",this.node),5:cc.find("chess/guanyu",this.node),6:cc.find("chess/zhaoyun",this.node),7:cc.find("chess/shibing0",this.node),8:cc.find("chess/shibing1",this.node),9:cc.find("chess/shibing2",this.node),10:cc.find("chess/shibing3",this.node)},cc.find("mask",this.successPopup).on(cc.Node.EventType.TOUCH_END,function(){t.successPopup.active=!1,p.getIsRandom()?t.randomGame():(p.startGame(t.mapIndex),t.setInfo())}),cc.find("next",this.successPopup).on(cc.Node.EventType.TOUCH_END,function(){t.successPopup.active=!1,p.getIsRandom()?t.randomGame():(t.mapIndex<p.maps.length-1&&(t.mapIndex+=1),p.startGame(t.mapIndex),t.setInfo())}),p.bindSuccessEvent(function(){if(u.isSupportRank()&&!p.getIsUseTip()){var e=localStorage.getItem("@xf/hrdScore")||"0",o=Number(e)+t.star.width/30;u.submitRankScore(o,function(){localStorage.setItem("@xf/hrdScore",""+o)})}t.mapIndex===p.maps.length-1?cc.loader.loadRes("successPopup1",cc.SpriteFrame,function(e,o){cc.find("next",t.successPopup).getComponent(cc.Sprite).spriteFrame=o,t.successPopup.active=!0}):t.successPopup.active=!0}),s.bindHistoryConfirmEvent(function(){var e=t.chessMap,o=t.historyInfo,n=o.mapIndex,c=o.hrdMap,r=p.getMapInfo(n),i=r.map,s=r.name,a=r.level,u=c||i,h=p.computePosition(u);p.setMap(u),p.setMapIndex(n),t.mapIndex=n,t.title.string=s,t.star.width=30*a,Object.keys(h).forEach(function(t){var o=h[t],n=o[0],c=o[1],r=o[2];e[t].position=cc.v3(n,c,r)})}),p.startGame(this.mapIndex),this.setInfo();var e=localStorage.getItem("@xf/historyGame");if(e)try{var o=JSON.parse(e),n=o.mapIndex,c=o.hrdMap,r=o.position;void 0!==n&&(this.historyPopup.active=!0,this.historyInfo={mapIndex:n,hrdMap:c,position:r})}catch(h){}else{var i=localStorage.getItem("@xf/levels")||"[]";try{5===JSON.parse(i).length?this.randomGame():(p.startGame(this.mapIndex),this.setInfo())}catch(h){}}a.bindChooseLevelEvent(function(e){t.mapIndex!==e&&(t.mapIndex=e,p.startGame(e),t.setInfo(),p.checkSuccess())}),a.bindRandomLevelEvent(this.randomGame),this.btnReset.on(cc.Node.EventType.TOUCH_END,this.onReset,this),this.btnTip.on(cc.Node.EventType.TOUCH_END,this.onTip,this),this.btnLevel.on(cc.Node.EventType.TOUCH_END,this.onChooseLevel,this),this.btnRank.on(cc.Node.EventType.TOUCH_END,u.showRankList,this),u.isSupportRank()||(this.btnRank.active=!1,cc.find("text",this.btnTip).active=!1)},e.prototype.onReset=function(){p.startGame(this.mapIndex),this.setInfo(),p.checkSuccess()},e.prototype.onTip=function(){var t=this;if(p.setIsUseTip(),!this.isCompute){this.isCompute=!0;var e=this.chessMap,o=i.auto({hrdMap:p.getMap(),operate:[]}).operate,n=0;setInterval(function(){if(n<(o.length<20?o.length/2:10)){var c=o[n].split("_"),r=c[0];switch(c[1]){case"left":p.canMoveLeft(Number(r))&&(e[r].x-=160,p.checkSuccess());break;case"right":p.canMoveRight(Number(r))&&(e[r].x+=160,p.checkSuccess());break;case"up":p.canMoveUp(Number(r))&&(e[r].y+=160,p.checkSuccess());break;case"down":p.canMoveDown(Number(r))&&(e[r].y-=160,p.checkSuccess())}n++}else t.isCompute=!1},200)}},e.prototype.onChooseLevel=function(){this.guanqiaPopup.active=!0},e.prototype.setInfo=function(){var t=p.getMapInfo(this.mapIndex),e=t.name,o=t.level,n=t.map;this.setUIInfo(e,o,n)},e.prototype.setUIInfo=function(t,e,o){var n=this.chessMap;this.title.string=t,this.star.width=30*e;var c=p.computePosition(o);Object.keys(c).forEach(function(t){var e=c[t],o=e[0],r=e[1],i=e[2];n[t].position=cc.v3(o,r,i)})},r([l(cc.Label)],e.prototype,"title",void 0),r([l(cc.Node)],e.prototype,"star",void 0),r([l(cc.Node)],e.prototype,"successPopup",void 0),r([l(cc.Node)],e.prototype,"historyPopup",void 0),r([l(cc.Node)],e.prototype,"guanqiaPopup",void 0),r([l(cc.Node)],e.prototype,"btnReset",void 0),r([l(cc.Node)],e.prototype,"btnTip",void 0),r([l(cc.Node)],e.prototype,"btnLevel",void 0),r([l(cc.Node)],e.prototype,"btnRank",void 0),r([f],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./Auto":"Auto","./HistoryPopup":"HistoryPopup","./LevelPopup":"LevelPopup","./Map":"Map","./Rank":"Rank"}],Map:[function(t,e,o){"use strict";cc._RF.push(e,"52bd8Cp0TtOHLDBnkocUrIG","Map"),Object.defineProperty(o,"__esModule",{value:!0}),o.bindSuccessEvent=o.checkSuccess=o.canMoveDown=o.canMoveUp=o.canMoveLeft=o.canMoveRight=o.getIsUseTip=o.setIsUseTip=o.getIsRandom=o.getMapInfo=o.getMap=o.setMap=o.setMapIndex=o.startRandomGame=o.startGame=o.chessCount=o.maps=o.computePosition=void 0;var n,c,r,i,s;o.computePosition=function(t){for(var e={},o=0;o<t.length;o++)for(var n=0;n<t[o].length;n++){var c=t[o][n];0!==c&&(e[c]=[[-320,-160,0,160][n],[320,160,0,-160,-320][o],0])}return e[2][0]-=160,e[5][0]-=160,e},o.maps=[{name:"\u5c0f\u8bd5\u725b\u5200",level:1,map:[[1,4,6,3],[1,4,6,3],[5,5,2,2],[7,8,2,2],[9,10,0,0]]},{name:"\u6377\u8db3\u5148\u767b",level:2,map:[[7,2,2,8],[9,2,2,10],[0,5,5,0],[1,3,4,6],[1,3,4,6]]},{name:"\u96e8\u58f0\u6dc5\u6ca5",level:3,map:[[1,2,2,7],[1,2,2,8],[3,5,5,6],[3,4,0,6],[9,4,0,10]]},{name:"\u5c06\u62e5\u66f9\u8425",level:4,map:[[0,2,2,0],[3,2,2,4],[3,1,6,4],[7,1,6,8],[5,5,9,10]]},{name:"\u6a2a\u5200\u7acb\u9a6c",level:4,map:[[1,2,2,3],[1,2,2,3],[4,5,5,6],[4,7,8,6],[9,0,0,10]]}],o.chessCount={1:2,2:4,3:2,4:2,5:2,6:2,7:1,8:1,9:1,10:1},o.startGame=function(t){i=!1,s=!1,n=t,c=JSON.parse(JSON.stringify(o.maps[t].map)),r=o.computePosition(c)},o.startRandomGame=function(t){localStorage.removeItem("@xf/historyGame"),i=!0,s=!1,c=t,r=o.computePosition(c)},o.setMapIndex=function(t){n=t},o.setMap=function(t){c=t,r=o.computePosition(t)},o.getMap=function(){return c},o.getMapInfo=function(t){return o.maps[t]},o.getIsRandom=function(){return i},o.setIsUseTip=function(){s=!0},o.getIsUseTip=function(){return s},o.canMoveRight=function(t){for(var e,n=o.chessCount[t],i=[],s=0;s<c.length;s++)for(var a=0;a<c[s].length;a++)c[s][a]===t&&(0!==c[s][a+1]?n--:i.push([s,a]));if(e=2===t&&2===n||5===t&&1===n||n===o.chessCount[t]){for(s=0;s<i.length;s++){var p=i[s],u=p[0],h=p[1];2===t||5===t?(c[u][h-1]=0,c[u][h+1]=t):(c[u][h]=0,c[u][h+1]=t)}r[t][0]+=160}return e},o.canMoveLeft=function(t){for(var e,n=o.chessCount[t],i=[],s=0;s<c.length;s++)for(var a=0;a<c[s].length;a++)c[s][a]===t&&(0!==c[s][a-1]?n--:i.push([s,a]));if(e=2===t&&2===n||5===t&&1===n||n===o.chessCount[t]){for(s=0;s<i.length;s++){var p=i[s],u=p[0],h=p[1];2===t||5===t?(c[u][h-1]=t,c[u][h+1]=0):(c[u][h]=0,c[u][h-1]=t)}r[t][0]-=160}return e},o.canMoveUp=function(t){for(var e,n=o.chessCount[t],i=[],s=0;s<c.length;s++)for(var a=0;a<c[s].length;a++)c[s][a]===t&&(c[s-1]&&0===c[s-1][a]?i.push([s,a]):n--);if(e=2===t&&2===n||!(![1,3,4,6].includes(t)||1!==n)||n===o.chessCount[t]){for(s=0;s<i.length;s++){var p=i[s],u=p[0],h=p[1];2===t||[1,3,4,6].includes(t)?(c[u-1][h]=t,c[u+1][h]=0):(c[u][h]=0,c[u-1][h]=t)}r[t][1]+=160}return e},o.canMoveDown=function(t){for(var e,n=o.chessCount[t],i=[],s=0;s<c.length;s++)for(var a=0;a<c[s].length;a++)c[s][a]===t&&(c[s+1]&&0===c[s+1][a]?i.push([s,a]):n--);if(e=2===t&&2===n||!(![1,3,4,6].includes(t)||1!==n)||n===o.chessCount[t]){for(s=0;s<i.length;s++){var p=i[s],u=p[0],h=p[1];2===t||[1,3,4,6].includes(t)?(c[u-1][h]=0,c[u+1][h]=t):(c[u][h]=0,c[u+1][h]=t)}r[t][1]-=160}return e};var a=function(){};o.checkSuccess=function(){if(c[5]&&2===c[5][1]||!c[5]&&2===c[4][1]&&2===c[4][2]){if(a(),i)return;localStorage.setItem("@xf/historyGame",JSON.stringify({mapIndex:n+1===o.maps.length?n:n+1,hrdMap:null,position:null}));var t=localStorage.getItem("@xf/levels");if(t)try{var e=JSON.parse(t);e.includes(n)||(e.push(n),localStorage.setItem("@xf/levels",JSON.stringify(e)))}catch(s){localStorage.setItem("@xf/levels",JSON.stringify([n]))}else localStorage.setItem("@xf/levels",JSON.stringify([n]))}else{if(i)return;localStorage.setItem("@xf/historyGame",JSON.stringify({mapIndex:n,hrdMap:c,position:r}))}},o.bindSuccessEvent=function(t){a=t},cc._RF.pop()},{}],Popup:[function(t,e,o){"use strict";cc._RF.push(e,"90e93p4sTdLXKZmgm2IGmUz","Popup");var n,c=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var c,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(c=t[s])&&(i=(r<3?c(i):r>3?c(e,o,i):c(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator.ccclass,s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.onEnable=function(){this.node.opacity=0,cc.tween(this.node).to(.3,{opacity:255}).start()},r([i],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],RankPopup:[function(t,e,o){"use strict";cc._RF.push(e,"d7883BrEuhBRppqa67beTL1","RankPopup");var n,c=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var c,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(c=t[s])&&(i=(r<3?c(i):r>3?c(e,o,i):c(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator.ccclass,s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.onLoad=function(){var t=this;this.text=cc.find("text",this.node).getComponent(cc.Label),cc.find("mask",this.node).on(cc.Node.EventType.TOUCH_END,function(e){e.preventDefault&&e.preventDefault(),t.node.active=!1})},e.prototype.onEnable=function(){if(this.text){var t=localStorage.getItem("@xf/hrdScore")||"0";this.text.string=t+"\u5206"}},r([i],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],Rank:[function(t,e,o){"use strict";cc._RF.push(e,"73481KPDgJPe4gUfSneznen","Rank"),Object.defineProperty(o,"__esModule",{value:!0}),o.submitRankScore=o.showRankList=o.isSupportRank=void 0,o.isSupportRank=function(){return window.h5api,!0},o.showRankList=function(){var t=window;t.h5api?t.h5api.showRankList():cc.find("Canvas/rankPopup").active=!0},o.submitRankScore=function(t,e){var o=window;o.h5api?o.h5api.submitRankScore(763,t,function(t){1e3===t.code&&e()}):e()},cc._RF.pop()},{}],"use_v2.1-2.2.1_cc.Toggle_event":[function(t,e){"use strict";cc._RF.push(e,"b87b6zE859DmISjgoQAKyV9","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}]},{},["Auto","Button","Chess","Dialog","HistoryPopup","LevelPopup","Main","Map","Popup","Rank","RankPopup","use_v2.1-2.2.1_cc.Toggle_event"]);